<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building REST APIs with FastAPI and Python | THE MACHINE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'VT323', monospace;
            background: #0a0a0a;
            color: #00ff00;
            min-height: 100vh;
            line-height: 1.6;
            font-size: 18px;
            image-rendering: pixelated;
        }
        
        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 40px 24px;
        }
        
        .back {
            margin-bottom: 32px;
        }
        
        .back a {
            color: #006600;
            font-size: 0.95rem;
            text-decoration: none;
            padding: 8px 12px;
            border: 1px solid #1a3a1a;
            display: inline-block;
        }
        
        .back a:hover {
            color: #00ff00;
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.05);
        }
        
        h1 {
            font-family: 'VT323', monospace;
            font-size: 2rem;
            font-weight: 400;
            letter-spacing: 2px;
            color: #00ff00;
            margin-bottom: 12px;
            line-height: 1.3;
        }
        
        .meta {
            color: #006600;
            font-size: 0.85rem;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #1a3a1a;
        }
        
        .content {
            font-size: 1rem;
        }
        
        .content h2 {
            font-size: 1.4rem;
            font-weight: 400;
            color: #00ff00;
            margin: 36px 0 16px;
            letter-spacing: 1px;
            border-left: 3px solid #00ff00;
            padding-left: 12px;
        }
        
        .content h3 {
            font-size: 1.15rem;
            font-weight: 400;
            color: #00cc00;
            margin: 28px 0 12px;
        }
        
        .content p {
            margin-bottom: 16px;
            color: #00cc00;
        }
        
        .content a {
            color: #00ff00;
            text-decoration: none;
            border-bottom: 1px dashed #004400;
        }
        
        .content a:hover {
            background: rgba(0, 255, 0, 0.1);
            border-bottom-style: solid;
        }
        
        .content code {
            background: #0d1a0d;
            padding: 2px 8px;
            border-radius: 2px;
            font-size: 0.9em;
            color: #00ff00;
            border: 1px solid #1a3a1a;
        }
        
        .content pre {
            background: #050a05;
            padding: 20px;
            border-radius: 0;
            overflow-x: auto;
            margin: 24px 0;
            border: 1px solid #1a3a1a;
        }
        
        .content pre code {
            background: none;
            padding: 0;
            border: none;
            color: #00ff00;
        }
        
        .content ul, .content ol {
            padding-left: 24px;
            margin: 16px 0;
        }
        
        .content li {
            margin: 10px 0;
            color: #00cc00;
            list-style-type: square;
        }
        
        .content li::marker {
            color: #006600;
        }
        
        .content blockquote {
            border-left: 3px solid #006600;
            margin: 24px 0;
            padding: 16px 20px;
            background: #050a05;
            color: #008800;
        }
        
        .content hr {
            border: none;
            border-top: 1px solid #1a3a1a;
            margin: 40px 0;
        }
        
        .content img {
            max-width: 100%;
            border: 1px solid #1a3a1a;
            margin: 24px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="back">
            <a href="/">< RETURN</a>
        </nav>
        
        <article>
            <h1>Building REST APIs with FastAPI and Python</h1>
            <p class="meta">> TIMESTAMP: 2026-02-07 // STATUS: ARCHIVED</p>
            
            <div class="content">
<h1>Building REST APIs with FastAPI and Python</h1>
<p>FastAPI has become the go-to framework for building high-performance APIs in Python. This guide covers everything from basics to advanced features.</p>
<h2>Why FastAPI?</h2>
<p>FastAPI offers several advantages:</p>
<ul>
<li><strong>Performance</strong>: On par with Node.js and Go</li>
<li><strong>Type Safety</strong>: Automatic Pydantic validation</li>
<li><strong>Documentation</strong>: Auto-generated OpenAPI docs</li>
<li><strong>Developer Experience</strong>: Easy to use and maintain</li>
</ul>
<h2>Getting Started</h2>
<pre><code class="language-bash">pip install fastapi uvicorn pydantic
</code></pre>
<h3>Basic API Structure</h3>
<pre><code class="language-python">from fastapi import FastAPI, HTTPException
from pydantic import BaseModel, EmailStr
from typing import Optional
from datetime import datetime
import uuid

app = FastAPI(
    title=&quot;User Management API&quot;,
    description=&quot;A simple API for managing users&quot;,
    version=&quot;1.0.0&quot;
)

# Data Models
class UserCreate(BaseModel):
    name: str
    email: EmailStr
    age: Optional[int] = None

class UserResponse(BaseModel):
    id: str
    name: str
    email: str
    age: Optional[int]
    created_at: datetime

# In-memory database
users_db = {}

# Create User
@app.post(&quot;/users&quot;, response_model=UserResponse, status_code=201)
async def create_user(user: UserCreate):
    user_id = str(uuid.uuid4())
    now = datetime.utcnow()
    
    new_user = {
        &quot;id&quot;: user_id,
        &quot;name&quot;: user.name,
        &quot;email&quot;: user.email,
        &quot;age&quot;: user.age,
        &quot;created_at&quot;: now
    }
    
    users_db[user_id] = new_user
    return new_user

# Get All Users
@app.get(&quot;/users&quot;, response_model=list[UserResponse])
async def get_users(skip: int = 0, limit: int = 10):
    users = list(users_db.values())
    return users[skip : skip + limit]

# Get Single User
@app.get(&quot;/users/{user_id}&quot;, response_model=UserResponse)
async def get_user(user_id: str):
    if user_id not in users_db:
        raise HTTPException(status_code=404, detail=&quot;User not found&quot;)
    return users_db[user_id]

# Update User
@app.put(&quot;/users/{user_id}&quot;, response_model=UserResponse)
async def update_user(user_id: str, user_update: UserCreate):
    if user_id not in users_db:
        raise HTTPException(status_code=404, detail=&quot;User not found&quot;)
    
    user = users_db[user_id]
    user[&quot;name&quot;] = user_update.name
    user[&quot;email&quot;] = user_update.email
    user[&quot;age&quot;] = user_update.age
    
    return user

# Delete User
@app.delete(&quot;/users/{user_id}&quot;, status_code=204)
async def delete_user(user_id: str):
    if user_id not in users_db:
        raise HTTPException(status_code=404, detail=&quot;User not found&quot;)
    del users_db[user_id]
    return None

if __name__ == &quot;__main__&quot;:
    import uvicorn
    uvicorn.run(app, host=&quot;0.0.0.0&quot;, port=8000)
</code></pre>
<h2>Advanced Features</h2>
<h3>Dependency Injection</h3>
<pre><code class="language-python">from fastapi import Depends, FastAPI
from typing import Annotated

class Database:
    def __init__(self):
        self.users = {}
    
    def get_user(self, user_id: str):
        return self.users.get(user_id)

db = Database()

async def get_db():
    return db

async def verify_user_exists(user_id: str, db: Annotated[Database, Depends(get_db)]):
    user = db.get_user(user_id)
    if not user:
        raise HTTPException(status_code=404, detail=&quot;User not found&quot;)
    return user

@app.get(&quot;/users/{user_id}&quot;)
async def read_user(user = Depends(verify_user_exists)):
    return user
</code></pre>
<h3>Authentication with OAuth2</h3>
<pre><code class="language-python">from fastapi import Depends, FastAPI, HTTPException, status
from fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm
from pydantic import BaseModel
from datetime import datetime, timedelta
from jose import JWTError, jwt

SECRET_KEY = &quot;your-secret-key&quot;
ALGORITHM = &quot;HS256&quot;
ACCESS_TOKEN_EXPIRE_MINUTES = 30

app = FastAPI()

oauth2_scheme = OAuth2PasswordBearer(tokenUrl=&quot;token&quot;)

class Token(BaseModel):
    access_token: str
    token_type: str

def create_access_token(data: dict):
    to_encode = data.copy()
    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)
    to_encode.update({&quot;exp&quot;: expire})
    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)

@app.post(&quot;/token&quot;, response_model=Token)
async def login(form_data: OAuth2PasswordRequestForm = Depends()):
    # Validate credentials (simplified)
    if form_data.username != &quot;admin&quot; or form_data.password != &quot;secret&quot;:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail=&quot;Incorrect username or password&quot;
        )
    
    access_token = create_access_token(data={&quot;sub&quot;: form_data.username})
    return {&quot;access_token&quot;: access_token, &quot;token_type&quot;: &quot;bearer&quot;}

@app.get(&quot;/protected&quot;)
async def protected_route(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        username: str = payload.get(&quot;sub&quot;)
        if username is None:
            raise HTTPException(status_code=401, detail=&quot;Invalid token&quot;)
    except JWTError:
        raise HTTPException(status_code=401, detail=&quot;Invalid token&quot;)
    
    return {&quot;username&quot;: username, &quot;message&quot;: &quot;Access granted&quot;}
</code></pre>
<h3>Background Tasks</h3>
<pre><code class="language-python">from fastapi import BackgroundTasks, FastAPI

def send_email(email: str, message: str):
    # Simulate email sending
    print(f&quot;Sending email to {email}: {message}&quot;)

@app.post(&quot;/users/{user_id}/notify&quot;)
async def notify_user(user_id: str, background_tasks: BackgroundTasks):
    background_tasks.add_task(send_email, f&quot;user{user_id}@example.com&quot;, &quot;Welcome!&quot;)
    return {&quot;message&quot;: &quot;Notification scheduled&quot;}
</code></pre>
<h3>WebSockets</h3>
<pre><code class="language-python">from fastapi import FastAPI, WebSocket
from typing import Set

app = FastAPI()

connected_clients: Set[WebSocket] = set()

@app.websocket(&quot;/ws&quot;)
async def websocket_endpoint(websocket: WebSocket):
    await websocket.accept()
    connected_clients.add(websocket)
    try:
        while True:
            data = await websocket.receive_text()
            # Broadcast to all clients
            for client in connected_clients:
                await client.send_text(f&quot;Message: {data}&quot;)
    finally:
        connected_clients.remove(websocket)
</code></pre>
<h2>Database Integration with SQLAlchemy</h2>
<pre><code class="language-python">from fastapi import FastAPI, Depends
from sqlalchemy import create_engine, Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker, Session

DATABASE_URL = &quot;postgresql://user:password@localhost/dbname&quot;

engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
Base = declarative_base()

class User(Base):
    __tablename__ = &quot;users&quot;
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String, index=True)
    email = Column(String, unique=True, index=True)

Base.metadata.create_all(bind=engine)

def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

app = FastAPI()

@app.post(&quot;/users/&quot;)
def create_user(name: str, email: str, db: Session = Depends(get_db)):
    db_user = User(name=name, email=email)
    db.add(db_user)
    db.commit()
    db.refresh(db_user)
    return db_user
</code></pre>
<h2>Testing FastAPI Applications</h2>
<pre><code class="language-python">from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

def test_create_user():
    response = client.post(
        &quot;/users&quot;,
        json={&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.com&quot;, &quot;age&quot;: 30}
    )
    assert response.status_code == 201
    data = response.json()
    assert data[&quot;name&quot;] == &quot;John&quot;
    assert &quot;id&quot; in data

def test_get_user():
    # Create user first
    client.post(&quot;/users&quot;, json={&quot;name&quot;: &quot;Jane&quot;, &quot;email&quot;: &quot;jane@example.com&quot;})
    
    # Get user
    response = client.get(&quot;/users/1&quot;)
    assert response.status_code == 200
    assert response.json()[&quot;name&quot;] == &quot;Jane&quot;
</code></pre>
<h2>Best Practices</h2>
<ol>
<li><strong>Use Pydantic Models</strong>: Leverage type validation</li>
<li><strong>Implement Proper Error Handling</strong>: Use HTTPException</li>
<li><strong>Add Rate Limiting</strong>: Protect your API from abuse</li>
<li><strong>Use Environment Variables</strong>: Store secrets securely</li>
<li><strong>Document Your API</strong>: Use docstrings and OpenAPI</li>
<li><strong>Write Tests</strong>: Ensure reliability and correctness</li>
<li><strong>Use Async/Await</strong>: For I/O-bound operations</li>
</ol>
<h2>Running in Production</h2>
<pre><code class="language-bash"># Using Gunicorn with Uvicorn workers
gunicorn main:app -k uvicorn.workers.UvicornWorker -w 4 -b 0.0.0.0:8000

# Using Docker
# Dockerfile
FROM python:3.9
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD [&quot;uvicorn&quot;, &quot;main:app&quot;, &quot;--host&quot;, &quot;0.0.0.0&quot;, &quot;--port&quot;, &quot;8000&quot;]
</code></pre>
<h2>Conclusion</h2>
<p>FastAPI provides a modern, high-performance framework for building APIs in Python. Its type safety, automatic documentation, and ease of use make it an excellent choice for projects of all sizes.</p>

            </div>
        </article>
    </div>
</body>
</html>